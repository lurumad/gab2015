!function(){"use strict";var app=angular.module("app",["ngRoute","app.controllers","app.templates"]);app.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"/views/partials/posts-list.html",controller:"postsController"}).when("/newpost",{templateUrl:"/views/partials/newpost.html",controller:"newPostController"}).when("/post/:postId",{templateUrl:"/views/partials/post-detail.html",controller:"postDetailController"}).otherwise({redirectTo:"/"})}])}(),angular.module("app.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("/views/partials/newpost.html","<div>\r\n    <div>\r\n        <label>TÃ­tulo:</label>\r\n        <input type='text' ng-model='post.title' size='100px'/>\r\n    </div>\r\n    <div>\r\n        <label>Body:</label>\r\n        <wysiwyg textarea-id='body'\r\n                 textarea-class='form-control'\r\n                 textarea-height='180px'\r\n                 textarea-name='body'\r\n                 textarea-required\r\n                 ng-model='post.body'\r\n                 enable-bootstrap-title='true'>\r\n        </wysiwyg>\r\n    </div>\r\n    <br/>\r\n    <input class='btn btn-primary' type='Button' value='Guardar Post' ng-click='addPost(post)'/>\r\n</div>\r\n"),$templateCache.put("/views/partials/post-detail.html","<div ng-show='contentLoaded'>\r\n    <div class='col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1'>\r\n        <div class='post-preview'>\r\n            <h2 class='post-title'>\r\n                {{post.title}}\r\n            </h2>\r\n            <span ng-bind-html='obtenerBodyHtml(post.body)'>\r\n                {{post.body}}\r\n            </span>\r\n            <div class='post-meta'>\r\n                Posteado por xxx el <b>{{post.createdAt | date:'dd/MM/yyyy h:mma'}}</b>.\r\n            </div>\r\n        </div>\r\n        <hr />\r\n        <div class='section-comment'>Comentarios</div>\r\n        <div ng-repeat='comment in post.comments'>\r\n            <div>\r\n                <div>\r\n                    {{comment.user}} <span class='post-comment-date'> {{post.createdAt | date:'dd/MM/yyyy h:mma'}}</span>\r\n                </div>\r\n                <div>\r\n                    {{comment.body}}\r\n                </div>\r\n            </div>\r\n            <hr />\r\n        </div>\r\n    </div>\r\n</div>\r\n    \r\n"),$templateCache.put("/views/partials/posts-list.html","<div class='col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1' ng-show='contentLoaded' ng-repeat='post in posts'>\r\n    <div class='post-preview'>\r\n        <a href='/#post/{{post.id}}'>\r\n            <h2 class='post-title'>\r\n                {{post.title}}\r\n            </h2>\r\n            <span ng-bind-html='obtenerBodyHtmlLimitado(post.body)'>\r\n                {{post.body}}\r\n            </span>\r\n        </a>\r\n        <div class='post-meta'>\r\n            Posteado por xxx el <b>{{post.createdAt | date:'dd/MM/yyyy h:mma'}}</b>.\r\n            Comentarios <b>({{post.comments.length}})</b>\r\n        </div>\r\n    </div>\r\n    <hr />\r\n</div>\r\n<div class='clear'></div>\r\n<div ng-show='contentLoaded' class='newPostBtn'>\r\n    <a class='btn btn-primary' href='/#newpost'>Nuevo Post</a>\r\n</div>\r\n\r\n")}]),angular.module("app.controllers",["ngSanitize","wysiwyg.module"]).controller("postsController",function($scope,$http,$sce){$http.get("api/posts").success(function(data){$scope.posts=data,$scope.contentLoaded=!0,console.log(data)}).error(function(data){console.log("Error:"+data)}),$scope.titleFilter=function(post){var keyword=new RegExp($scope.titleFilter,"i");return!$scope.nameFilter||keyword.test(post.title)},$scope.obtenerBodyHtmlLimitado=function(snippet){var limit=500,bodyCompleto=$sce.trustAsHtml(snippet);return snippet.length>limit&&(bodyCompleto=$sce.trustAsHtml(snippet.substring(0,limit)+" ...")),bodyCompleto}}).controller("postDetailController",function($scope,$routeParams,$http,$sce){$scope.id=$routeParams.postId,$http.get("api/posts/"+$routeParams.postId).success(function(data){$scope.post=data,$scope.contentLoaded=!0,console.log(data)}).error(function(data){console.log("Error:"+data)}),$scope.obtenerBodyHtml=function(snippet){return $sce.trustAsHtml(snippet)}}).controller("newPostController",function($scope,$http,$location){$scope.addPost=function(post){post&&""!==post.title&&""!==post.body&&(post.user="admin",$http.post("api/posts/",post).success(function(data){$location.path("/"),console.log(data)}).error(function(data){console.log("Error:"+data)}))}});